<?xml version="1.0" encoding="utf-8"?>
<Project DefaultTargets="Test" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <PropertyGroup>
    <SolutionDir>$(MSBuildProjectDirectory)\..\..\..\..\</SolutionDir>
    <TerminalBinDir>$(SolutionDir)bin\$(OutputBuildPlatform)\$(BuildConfiguration)</TerminalBinDir>
  </PropertyGroup>
  <Import Project="$(SolutionDir)src\common.build.pre.props" />
  <Import Project="$(SolutionDir)src\common.nugetversions.props" />

  <ItemGroup>
    <ProjectReference Include="TextBuffer.Unit.Tests.vcxproj">
      <Project>{531C23E7-4B76-4C08-8BBD-04164CB628C9}</Project>
    </ProjectReference>
  </ItemGroup>

  <Target Name="Test">
    <Exec 
      Command="powershell $(SolutionDir)build\scripts\Run-Tests.ps1 -MatchPattern '*TextBuffer.Unit.Tests*.dll' -Platform '$(Platform)' -Configuration '$(Configuration)' -LogPath '$(TerminalBinDir)\Logs'"
      WorkingDirectory="$(SolutionDir)"
    />
  </Target>
  
  <!-- Careful reordering these. Some default props (contained in these files) are order sensitive. -->
  <Import Project="$(SolutionDir)src\common.build.post.props" />
  <Import Project="$(SolutionDir)src\common.build.tests.props" />
  <Import Project="$(SolutionDir)src\common.nugetversions.targets" />
</Project>